check_for_body:
  switch:
    - condition: ${incoming.body == null}
      next: return_incorrect_request
  next: check_for_required_parameters

check_for_required_parameters:
  switch:
    - condition: ${incoming.body.name == null || incoming.body.description == null}
      next: return_incorrect_request
  next: service_add

extract_request_data:
  assign:
    name: ${incoming.body.name}
    description: ${incoming.body.description}

service_add:
  call: reflect.mock
  args:
    response:
      id: 1
      name: "New Service name"
      description: "New Service description"
  result: createdService

return_value:
  status: 201
  return: ${createdService.response.body}
  next: end

return_incorrect_request:
  status: 400
  return: "Required parameter(s) missing"
